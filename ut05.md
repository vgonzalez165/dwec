---
layout: default
title: UT05. Eventos y formularios
nav_order: 6
---

# UT05. Eventos y formularios

## Eventos del ratón

### PR0501: Captura de eventos del ratón (I)

Crea una página web que contendrá una lista y añádele funcionalidad con JavaScript para que los elementos sean seleccionables de forma análoga a como se seleccionan en el explorador de archivos:

- Si se hace click en un elemento se selecciona ese y se deseleccionan los demás
- Si se hace click en un elemento ya seleccionado se deselecciona
- Si se hace Ctrl-Click en un elemento se selecciona/deselecciona sin modificar los demás

La selección de los elementos la puedes realizar añadiendo una clase `.selected` que tenga asociado un color de fondo diferente en CSS.

Evita también la selección nativa del navegador en los clicks.

---

### PR0502: Captura de eventos del ratón (II)

Diseña una página web en la que se mostrará una cuadrícula de 10x10 donde cada celda estará numerada con números consecutivos del 1 al 100.

Programa el comportamiento de la página para que:

- Cada vez que el usuario haga click sobre una casilla se seleccione (marcándola de otro color). Si la casilla ya está seleccionada se deselecciona (volviendo a quedar de color blanco).
- Si el usuario hace click con el botón derecho del ratón la casilla se marca de color rojo y ya no podrá volver a modificarse.


---

### PR0503: Captura de eventos del ratón (III)

Modifica la práctica que realizamos en la unidad anterior para que cada vez que el usuario haga click en una casilla se muestre en alguna parte de la pantalla las coordenadas de la casilla en la que se ha hecho click.

---

### PR0504: Captura de eventos del ratón (IV)

Vamos a hacer un pequeño juego que nos servirá para mejorar nuestros conocimientos de los eventos del ratón. El juego simplemente consistirá en mostrar una serie de recuadros por pantalla y esperar a que el usuario haga click en ellos. Cada vez que hace click en un recuadro se incrementa un contador de puntuación en 1 y se redibuja el recuadro con diferente tamaño en otra posición de la pantalla.

Una versión muy básica del juego la puedes ver en el siguiente vídeo:

<video width="640" controls>
    <source src="assets/videos/pr0504.mp4" type="video/mp4">
    Tu navegador no soporta la reproducción de vídeo
</video>

Algunas pautas a seguir para realizar esta práctica:

- La idea es simple, creas un elemento HTML con un *listener* que, cuando recoge un click incrementa el contador y cambia la posición y tamaño del elemento.
- Para calcular la posición del elemento tienes que tener conocimiento del tamaño de la ventana del navegador. Este valor lo puedes conocer mediante las propiedades `window.innerWidth` y `window.innerHeight`.
- Un problema que encontrarás es que el tamaño de la ventana puede modificarse mientras el usuario está jugando. Afortunadamente, esto también lanza un evento llamado `resize` y que debes capturar en el objeto `window`.

---

### PR0505: Captura de eventos del ratón (V)

Vamos a mejorar el programa anterior. Para ello, en esta práctica tienes que realizar por los menos 3 de las siguientes mejoras propuestas.

- Incluye un botón que permita reiniciar el contador a cero.
- Añade un selector que servirá para seleccionar la dificultad, a mayor dificultad menor será el tamaño medio de los recuadros.
- Añade un cronómetro que limitará el tiempo que tiene el usuario
- Crea un ranking de los usuarios con las mejores puntuaciones, para ello, el usuario deberá poder introducir su nombre antes de poder darle al botón de Start.
- Añade un efecto psicodélico, haz que, cada vez que cambie de posición el recuadro cambie el color del mismo y también el del fondo de la ventana.

Como vas a hacer algo un poco más complejo, estaría bien que prepararas una interfaz más completa. Puedes hacerla como quieras, pero si necesitas un poco de inspiración en la siguiente imagen tienes una sugerencia de cómo podría ser:

![Interfaz](assets/pr0505/mockup.jpg)

**Consejos para trabajar con tiempo en JavaScript**

Probablemente, de todas las mejoras la que más dificultad tiene es la del establecimiento de un tiempo. Para ello necesitarás dos funciones que no hemos visto aún: [`setInterval`](https://developer.mozilla.org/es/docs/Web/API/setInterval) y [`setTimeout`](https://developer.mozilla.org/es/docs/Web/API/setTimeout). La primera permite ejecutar una función función cada cierto tiempo mientras que la segunda permite establecer un tiempo de espera tras el cual se ejecutará una función indicada una única vez.

En este caso necesitarás la primera. Básicamente, la idea será:

- Suponemos que el tiempo de juego es, por ejemplo, de 20 segundos.
- Establecemos un contador a cero que se mostrará en pantalla.
- Creamos un intervalo que ejecutará una función cada segundo.
- La función incrementará el contador en uno y comprueba que no haya llegado hasta 20.
- Cuando el contador llegue a 20 se limpia el intervalo con la función [`clearInterval`](https://developer.mozilla.org/es/docs/Web/API/clearInterval) y se muestra la puntuación del jugador.

---

### PR0506: Captura de eventos del teclado

Ahora que ya estarás familiarizado con los eventos del ratón, vamos a incluir los eventos del teclado. Para ello, vas a implementar el juego del ahorcado donde el usuario podrá indicar cada una de las letras tanto a través del teclado como utilizando un teclado virtual en pantalla.

El resultado final puede ser algo parecido a lo que se muestra en el siguiente vídeo:

<video width="640" controls>
    <source src="assets/videos/pr0506.mp4" type="video/mp4">
    Tu navegador no soporta la reproducción de vídeo
</video>

**Consejos para realizar la práctica**

- Las palabras las puedes objener del fichero indicado en recursos, que tiene un listado de palabras en castellano con más de 7 letras.
- Tambien en recursos dispones de imágenes para los diferentes estados del dibujo, aunque puedes cambiarlo si quieres.
- Lo ideal es que todos los eventos que recojas (pulsación de tecla, click, ...) se gestionen desde una misma función en la que se mirará el tipo de evento para ver de donde obtener la letra seleccionada (si es una pulsación de tecla estará en la propiedad `key` o `code`, mientras que si se trata de una pulsación se deberá obtener del atributo personalizado del elemento que recogió el evento).
- Puedes ejercitar tus conocimientos de CSS o, si quieres centrarte en la lógica, utilizar el fichero CSS que se encuentra en recursos.

**Recursos**

- [Listado de palabras](assets/pr0506/words.js)
- [Imágenes](assets/pr0506/imgs/)
- [CSS](assets/pr0506/style.css)
- [Estructura HTML](assets/pr0506/index.html)